import "packages/terraform/Terraform.pkl"
import "packages/terraform/TFConverter.pkl"
import "packages/aws/aws.pkl"
import "env.pkl"

terraform: Terraform = new {
  required_providers {
    ["aws"] = new aws.RequiredProvider {
      version = "~> 5.70.0"
    }
  }
}

provider {
  ["aws"] = new aws.Provider {
    region = env.AWS_REGION
    profile = env.AWS_PROFILE
  }
}

local tfObjects = TFConverter.toTfDynamic(import*("tfObjects/*.pkl"))

data = tfObjects.data
resource = tfObjects.resource
